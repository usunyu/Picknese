!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Geosuggest=e()}}(function(){return function e(t,s,n){function i(o,g){if(!s[o]){if(!t[o]){var a="function"==typeof require&&require;if(!g&&a)return a(o,!0);if(u)return u(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=s[o]={exports:{}};t[o][0].call(l.exports,function(e){var s=t[o][1][e];return i(s?s:e)},l,l.exports,e,t,s,n)}return s[o].exports}for(var u="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){(function(s){var n="undefined"!=typeof window?window.React:"undefined"!=typeof s?s.React:null,i=e("./GeosuggestItem.jsx"),u=n.createClass({displayName:"Geosuggest",getDefaultProps:function(){return{fixtures:[],placeholder:"Search places",onSuggestSelect:function(){},location:null,radius:0}},getInitialState:function(){return{isSuggestsHidden:!0,userInput:"",activeSuggest:null,suggests:[],geocoder:new google.maps.Geocoder,autocompleteService:new google.maps.places.AutocompleteService}},onInputChange:function(){var e=this.refs.geosuggestInput.getDOMNode().value;this.setState({userInput:e},function(){e||this.updateSuggests()}.bind(this)),e&&this.state.autocompleteService.getPlacePredictions({input:e,location:this.props.location||new google.maps.LatLng(0,0),radius:this.props.radius},function(e){this.updateSuggests(e)}.bind(this))},updateSuggests:function(e){e||(e=[]);var t=[],s=new RegExp(this.state.userInput,"gim");this.props.fixtures.forEach(function(e){e.label.match(s)&&(e.placeId=e.label,t.push(e))}.bind(this)),e.forEach(function(e){t.push({label:e.description,placeId:e.place_id})}.bind(this)),this.setState({suggests:t})},showSuggests:function(){this.updateSuggests(),this.setState({isSuggestsHidden:!1})},hideSuggests:function(){setTimeout(function(){this.setState({isSuggestsHidden:!0})}.bind(this),100)},onInputKeyDown:function(e){switch(e.which){case 40:e.preventDefault(),this.activateSuggest("next");break;case 38:e.preventDefault(),this.activateSuggest("prev");break;case 13:this.selectSuggest(this.state.activeSuggest);break;case 9:this.selectSuggest(this.state.activeSuggest);break;case 27:this.hideSuggests()}},activateSuggest:function(e){var t=this.state.suggests.length-1,s="next"===e,n=null,i=0,u=0;for(u;t>=u;u++)this.state.suggests[u]===this.state.activeSuggest&&(i=s?u+1:u-1);this.state.activeSuggest||(i=s?0:t),i>=0&&t>=i&&(n=this.state.suggests[i]),this.setState({activeSuggest:n})},selectSuggest:function(e){return e||(e={label:this.state.userInput}),this.setState({isSuggestsHidden:!0,userInput:e.label}),e.location?void this.props.onSuggestSelect(e):void this.geocodeSuggest(e)},geocodeSuggest:function(e){var t;this.state.geocoder.geocode({address:e.label},function(s,n){n===google.maps.GeocoderStatus.OK&&(t=s[0].geometry.location,e.location={lat:t.lat(),lng:t.lng()},this.props.onSuggestSelect(e))}.bind(this))},render:function(){return n.createElement("div",{className:"geosuggest",onClick:this.onClick},n.createElement("input",{className:"geosuggest__input",ref:"geosuggestInput",type:"text",value:this.state.userInput,placeholder:this.props.placeholder,onKeyDown:this.onInputKeyDown,onChange:this.onInputChange,onFocus:this.showSuggests,onBlur:this.hideSuggests}),n.createElement("ul",{className:this.getSuggestsClasses()},this.getSuggestItems()))},getSuggestItems:function(){return this.state.suggests.map(function(e){var t=this.state.activeSuggest&&e.placeId===this.state.activeSuggest.placeId;return n.createElement(i,{key:e.placeId,suggest:e,isActive:t,onSuggestSelect:this.selectSuggest})}.bind(this))},getSuggestsClasses:function(){var e="geosuggest__suggests";return e+=this.state.isSuggestsHidden?" geosuggest__suggests--hidden":""}});t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./GeosuggestItem.jsx":2}],2:[function(e,t){(function(e){var s="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,n=s.createClass({displayName:"GeosuggestItem",getDefaultProps:function(){return{isActive:!1,suggest:{label:""},onSuggestSelect:function(){}}},onClick:function(e){e.preventDefault(),this.props.onSuggestSelect(this.props.suggest)},render:function(){return s.createElement("li",{className:this.getSuggestClasses(),onClick:this.onClick},this.props.suggest.label)},getSuggestClasses:function(){var e="geosuggest-item";return e+=this.props.isActive?" geosuggest-item--active":""}});t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});